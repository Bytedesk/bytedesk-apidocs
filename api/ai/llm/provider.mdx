---
title: "POST 创建LLM提供商"
openapi: "POST /api/v1/provider"
---

## 概述

创建 LLM（大语言模型）提供商配置。

<div style={{ marginTop: 24, marginBottom: 24 }}>
  <ApiPlayground
    method="POST"
    endpoint="/api/v1/provider"
  />
</div>

## 接口说明

此接口用于创建 LLM 提供商配置。支持多种 LLM 提供商，如 OpenAI、Ollama、ZhipuAI、DeepSeek 等。

## 请求头

```
Authorization: Bearer <access_token>
Content-Type: application/json
```

## 请求体

```json
{
  "name": "OpenAI",
  "type": "OPENAI",
  "apiKey": "sk-xxxxxxxxxxxx",
  "apiUrl": "https://api.openai.com/v1",
  "isEnabled": true,
  "isDefault": false
}
```

## 字段说明

### 请求字段

- `name` (必需): 提供商名称
- `type` (必需): 提供商类型
  - `OPENAI`: OpenAI
  - `OLLAMA`: Ollama
  - `ZHIPU`: 智谱 AI
  - `DEEPSEEK`: DeepSeek
  - `GEMINI`: Google Gemini
  - `BAIDU`: 百度文心
  - `TENCENT`: 腾讯混元
  - `MINIMAX`: MiniMax
- `apiKey` (必需): API 密钥
- `apiUrl` (可选): API 地址
- `isEnabled` (可选): 是否启用，默认 true
- `isDefault` (可选): 是否为默认提供商，默认 false

### 提供商对象字段

- `uid`: 提供商唯一标识符
- `name`: 提供商名称
- `type`: 提供商类型
- `apiUrl`: API 地址
- `isEnabled`: 是否启用
- `isDefault`: 是否为默认提供商
- `modelCount`: 模型数量
- `createdAt`: 创建时间
- `updatedAt`: 更新时间

## 使用场景

- 配置 LLM 提供商
- 多提供商管理
- 切换默认提供商
- API 密钥管理

## 注意事项

- API 密钥会加密存储
- 只能有一个默认提供商
- 删除提供商前需要先删除关联的模型
- 禁用提供商不会影响已配置的机器人

<ResponseExample>

```json 200 成功响应
{
  "code": 200,
  "message": "success",
  "data": {
    "uid": "provider_123456",
    "name": "OpenAI",
    "type": "OPENAI",
    "apiUrl": "https://api.openai.com/v1",
    "isEnabled": true,
    "isDefault": false,
    "modelCount": 0,
    "createdAt": "2025-01-07T10:30:00Z",
    "updatedAt": "2025-01-07T10:30:00Z"
  }
}
```

```json 400 参数错误
{
  "code": 400,
  "message": "Provider type and API key are required",
  "data": null
}
```

</ResponseExample>

<RequestExample>

```bash cURL
# 创建 OpenAI 提供商
curl -X POST "https://api.weiyuai.cn/api/v1/provider" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "OpenAI",
    "type": "OPENAI",
    "apiKey": "sk-xxxxxxxxxxxx",
    "apiUrl": "https://api.openai.com/v1",
    "isEnabled": true,
    "isDefault": true
  }'

# 创建 Ollama 提供商
curl -X POST "https://api.weiyuai.cn/api/v1/provider" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Ollama",
    "type": "OLLAMA",
    "apiKey": "",
    "apiUrl": "http://localhost:11434",
    "isEnabled": true
  }'
```

```javascript JavaScript
// 创建 LLM 提供商
async function createLLMProvider(config) {
  const response = await fetch('https://api.weiyuai.cn/api/v1/provider', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer your_access_token_here',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(config)
  });

  const result = await response.json();
  return result.data;
}

// 使用示例 - OpenAI
const openai = await createLLMProvider({
  name: 'OpenAI',
  type: 'OPENAI',
  apiKey: 'sk-xxxxxxxxxxxx',
  apiUrl: 'https://api.openai.com/v1',
  isEnabled: true,
  isDefault: true
});

// 使用示例 - Ollama
const ollama = await createLLMProvider({
  name: 'Ollama',
  type: 'OLLAMA',
  apiKey: '',
  apiUrl: 'http://localhost:11434',
  isEnabled: true
});
```

```python Python
import requests

def create_llm_provider(name, provider_type, api_key, api_url=None, is_default=False):
    url = "https://api.weiyuai.cn/api/v1/provider"
    headers = {
      "Authorization": "Bearer your_access_token_here",
      "Content-Type": "application/json"
    }

    data = {
      "name": name,
      "type": provider_type,
      "apiKey": api_key,
      "isEnabled": True,
      "isDefault": is_default
    }

    if api_url:
        data["apiUrl"] = api_url

    response = requests.post(url, headers=headers, json=data)
    result = response.json()
    return result["data"]

# 使用示例
openai = create_llm_provider(
    name="OpenAI",
    provider_type="OPENAI",
    api_key="sk-xxxxxxxxxxxx",
    api_url="https://api.openai.com/v1",
    is_default=True
)
```

</RequestExample>
