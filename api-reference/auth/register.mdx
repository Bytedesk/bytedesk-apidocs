---
title: "POST 用户注册"
openapi: "POST /auth/v1/register"
---

<div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
  <div>
    <h1 style={{ margin: 0 }}>用户注册</h1>
    <p style={{ margin: '8px 0 0 0', color: '#6B7280' }}>通过短信或邮箱验证码完成用户泣册，返回用户信息和访问令牌</p>
  </div>
  <button 
    onClick={() => {
      const modal = document.createElement('div');
      modal.innerHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; justify-content: center; align-items: center;">
          <div style="background: white; padding: 20px; border-radius: 8px; width: 80%; max-width: 1000px; height: 80%; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h2>Try API - 用户注册</h2>
              <button onclick="this.closest('.modal-overlay').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: calc(100% - 60px);">
              <div>
                <h3>Request</h3>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">username</label>
                  <input type="text" placeholder="newuser" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="reg-username">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">password</label>
                  <input type="password" placeholder="SecurePassword123!" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="reg-password">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">mobile</label>
                  <input type="text" placeholder="13888888888" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="reg-mobile">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">email</label>
                  <input type="email" placeholder="user@example.com" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="reg-email">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">code (required)</label>
                  <input type="text" placeholder="123456" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="reg-code">
                </div>
                <button onclick="sendRegisterRequest()" style="background: #16A34A; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Send Request</button>
              </div>
              <div>
                <h3>Response</h3>
                <div style="background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; height: 400px; overflow-y: auto;" id="reg-response-area">
                  点击 "Send Request" 查看响应结果
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      modal.className = 'modal-overlay';
      document.body.appendChild(modal);
      
      window.sendRegisterRequest = async function() {
        const username = document.getElementById('reg-username').value;
        const password = document.getElementById('reg-password').value;
        const mobile = document.getElementById('reg-mobile').value;
        const email = document.getElementById('reg-email').value;
        const code = document.getElementById('reg-code').value;
        const responseArea = document.getElementById('reg-response-area');
        
        if (!code) {
          responseArea.innerHTML = '<div style="color: red;">验证码为必填项</div>';
          return;
        }
        
        responseArea.innerHTML = '<div>发送请求中...</div>';
        
        try {
          const response = await fetch('https://api.weiyuai.cn/auth/v1/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              username: username,
              password: password,
              mobile: mobile,
              email: email,
              code: code
            })
          });
          
          const data = await response.json();
          responseArea.innerHTML = '<pre style="margin: 0; white-space: pre-wrap;">' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
          responseArea.innerHTML = '<div style="color: red;">请求失败: ' + error.message + '</div>';
        }
      };
    }}
    style={{
      background: '#16A34A',
      color: 'white',
      border: 'none',
      padding: '8px 16px',
      borderRadius: '6px',
      cursor: 'pointer',
      fontSize: '14px',
      fontWeight: '500'
    }}
  >
    Try it →
  </button>
</div>

## 接口说明

用户可以通过手机号或邮箱进行注册，需要先获取验证码，然后完成注册流程。

## 请求体

```json
{
  "username": "string",
  "password": "string", 
  "mobile": "string",
  "email": "string",
  "code": "string",
  "accessToken": "string"
}
```

### 参数说明

- `username`: 用户名（可选）
- `password`: 密码（可选）
- `mobile`: 手机号（手机注册时必需）
- `email`: 邮箱地址（邮箱注册时必需）
- `code`: 验证码（必需）
- `accessToken`: 访问令牌（特殊场景）

## 响应示例

### 成功响应 (200)

```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "123456",
    "username": "testuser",
    "nickname": "测试用户",
    "email": "user@example.com",
    "mobile": "13888888888",
    "avatar": "https://api.weiyuai.cn/avatar/default.png",
    "status": "ACTIVE",
    "createdAt": "2023-01-01T12:00:00Z"
  }
}
```

### 错误响应 (400)

```json
{
  "error": 400,
  "message": "Invalid verification code"
}
```

## 注册流程

1. 选择注册方式（手机或邮箱）
2. 获取验证码
3. 填写用户信息
4. 提交注册请求
5. 获取访问令牌和用户信息

## 注意事项

- 验证码通常有时效限制（如5分钟）
- 手机号和邮箱需要唯一性验证
- 密码需要符合安全规则

<RequestExample>

```bash cURL
curl --request POST \
  --url "https://api.weiyuai.cn/auth/v1/register" \
  --header "Content-Type: application/json" \
  --data '{
    "username": "newuser",
    "password": "SecurePassword123!",
    "mobile": "13888888888",
    "email": "user@example.com",
    "code": "123456"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.weiyuai.cn/auth/v1/register', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    username: 'newuser',
    password: 'SecurePassword123!',
    mobile: '13888888888',
    email: 'user@example.com',
    code: '123456'
  })
});

const data = await response.json();
```

```python Python
import requests

url = "https://api.weiyuai.cn/auth/v1/register"
headers = {
    "Content-Type": "application/json"
}
data = {
    "username": "newuser",
    "password": "SecurePassword123!",
    "mobile": "13888888888",
    "email": "user@example.com",
    "code": "123456"
}

response = requests.post(url, headers=headers, json=data)
```

</RequestExample>