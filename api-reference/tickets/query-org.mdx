---
title: "GET 查询组织工单"
openapi: "GET /ticket/query/org"
---

<div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
  <div>
    <h1 style={{ margin: 0 }}>查询组织工单</h1>
    <p style={{ margin: '8px 0 0 0', color: '#6B7280' }}>查询指定组织下的所有工单，用于组织管理员或客服人员查看和管理工单</p>
  </div>
  <button 
    onClick={() => {
      const modal = document.createElement('div');
      modal.innerHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; justify-content: center; align-items: center;">
          <div style="background: white; padding: 20px; border-radius: 8px; width: 80%; max-width: 1000px; height: 80%; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h2>Try API - 查询组织工单</h2>
              <button onclick="this.closest('.modal-overlay').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: calc(100% - 60px);">
              <div>
                <h3>Request</h3>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Bearer Token (required)</label>
                  <input type="text" placeholder="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="query-org-token">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">orgUid</label>
                  <input type="text" placeholder="org_123456" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="query-org-uid">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">page</label>
                  <input type="number" placeholder="1" value="1" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="query-org-page">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">size</label>
                  <input type="number" placeholder="10" value="10" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="query-org-size">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">status</label>
                  <select style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="query-org-status">
                    <option value="">全部</option>
                    <option value="open">打开</option>
                    <option value="in_progress">处理中</option>
                    <option value="resolved">已解决</option>
                    <option value="closed">已关闭</option>
                  </select>
                </div>
                <button onclick="sendQueryOrgTicketsRequest()" style="background: #16A34A; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Send Request</button>
              </div>
              <div>
                <h3>Response</h3>
                <div style="background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; height: 400px; overflow-y: auto;" id="query-org-response-area">
                  点击 "Send Request" 查看响应结果
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      modal.className = 'modal-overlay';
      document.body.appendChild(modal);
      
      window.sendQueryOrgTicketsRequest = async function() {
        const token = document.getElementById('query-org-token').value;
        const orgUid = document.getElementById('query-org-uid').value;
        const page = document.getElementById('query-org-page').value || '1';
        const size = document.getElementById('query-org-size').value || '10';
        const status = document.getElementById('query-org-status').value;
        const responseArea = document.getElementById('query-org-response-area');
        
        if (!token) {
          responseArea.innerHTML = '<div style="color: red;">请填写 Bearer Token</div>';
          return;
        }
        
        responseArea.innerHTML = '<div>发送请求中...</div>';
        
        try {
          let url = `https://api.weiyuai.cn/ticket/query/org?page=${page}&size=${size}`;
          if (orgUid) {
            url += `&orgUid=${orgUid}`;
          }
          if (status) {
            url += `&status=${status}`;
          }
          
          const response = await fetch(url, {
            method: 'GET',
            headers: {
              'Authorization': 'Bearer ' + token,
              'Accept': 'application/json'
            }
          });
          
          const data = await response.json();
          responseArea.innerHTML = '<pre style="margin: 0; white-space: pre-wrap;">' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
          responseArea.innerHTML = '<div style="color: red;">请求失败: ' + error.message + '</div>';
        }
      };
    }}
    style={{
      background: '#16A34A',
      color: 'white',
      border: 'none',
      padding: '8px 16px',
      borderRadius: '6px',
      cursor: 'pointer',
      fontSize: '14px',
      fontWeight: '500'
    }}
  >
    Try it →
  </button>
</div>

## 接口说明

此接口用于查询指定组织下的所有工单列表，通常用于管理后台或客服系统中的工单管理功能。

## 请求头

```
Authorization: Bearer <access_token>
```

## 查询参数

- `orgUid` (必需): 组织的唯一标识符

## 响应示例

### 成功响应 (200)

```json
[
  {
    "id": "ticket_567890",
    "title": "登录问题咨询",
    "description": "用户无法正常登录系统，提示密码错误",
    "status": "OPEN",
    "priority": "MEDIUM",
    "createdAt": "2023-01-04T14:00:00Z"
  },
  {
    "id": "ticket_567891",
    "title": "功能建议",
    "description": "希望能增加数据导出功能",
    "status": "IN_PROGRESS",
    "priority": "LOW",
    "createdAt": "2023-01-03T10:30:00Z"
  },
  {
    "id": "ticket_567892",
    "title": "系统故障报告",
    "description": "系统在高峰期响应缓慢",
    "status": "RESOLVED",
    "priority": "HIGH",
    "createdAt": "2023-01-02T16:45:00Z"
  }
]
```

### 错误响应 (400)

```json
{
  "error": 400,
  "message": "Organization not found"
}
```

## 字段说明

- `id`: 工单唯一标识符
- `title`: 工单标题
- `description`: 工单详细描述
- `status`: 工单当前状态
- `priority`: 工单优先级
- `createdAt`: 工单创建时间

## 工单状态

- `OPEN`: 已开启，等待处理
- `IN_PROGRESS`: 正在处理中
- `RESOLVED`: 已解决
- `CLOSED`: 已关闭

## 使用场景

- 组织管理员查看所有工单
- 客服人员工单分配和管理
- 工单统计和分析
- 组织级别的服务监控
- 客户服务质量评估

## 权限要求

- 需要组织管理员权限或客服权限
- 只能查询有权限访问的组织工单
- 可能需要特定的角色授权

## 注意事项

- 返回的是工单数组，不包含分页
- 如果组织下工单较多，建议前端实现分页显示
- 工单信息可能包含敏感数据，需要权限控制
- 建议配合筛选和排序功能使用

<RequestExample>

```bash cURL
curl -X GET "https://api.weiyuai.cn/api/v1/ticket/query/org?orgUid=org_123456" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "Accept: application/json"
```

```javascript JavaScript
const response = await fetch('https://api.weiyuai.cn/api/v1/ticket/query/org?orgUid=org_123456', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer your_access_token_here',
    'Accept': 'application/json'
  }
});

const tickets = await response.json();
```

```python Python
import requests

url = "https://api.weiyuai.cn/api/v1/ticket/query/org"
headers = {
    "Authorization": "Bearer your_access_token_here",
    "Accept": "application/json"
}
params = {
    "orgUid": "org_123456"
}

response = requests.get(url, headers=headers, params=params)
tickets = response.json()
```

</RequestExample>