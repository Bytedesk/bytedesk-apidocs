---
title: "POST 创建线程"
openapi: "POST /threads/v1/create"
---

<div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
  <div>
    <h1 style={{ margin: 0 }}>创建线程</h1>
    <p style={{ margin: '8px 0 0 0', color: '#6B7280' }}>创建一个新的会话线程，用于组织和管理用户与客服之间的对话</p>
  </div>
  <button 
    onClick={() => {
      const modal = document.createElement('div');
      modal.innerHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; justify-content: center; align-items: center;">
          <div style="background: white; padding: 20px; border-radius: 8px; width: 80%; max-width: 1000px; height: 80%; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h2>Try API - 创建线程</h2>
              <button onclick="this.closest('.modal-overlay').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: calc(100% - 60px);">
              <div>
                <h3>Request</h3>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Bearer Token (required)</label>
                  <input type="text" placeholder="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="thread-token">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">title</label>
                  <input type="text" placeholder="客服咨询" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="thread-title">
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">description</label>
                  <textarea placeholder="对产品功能的咨询" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; height: 60px;" id="thread-description"></textarea>
                </div>
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">type</label>
                  <select style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" id="thread-type">
                    <option value="THREAD_TYPE_CUSTOMER">客服线程</option>
                    <option value="THREAD_TYPE_SUPPORT">技术支持</option>
                    <option value="THREAD_TYPE_SALES">销售咨询</option>
                  </select>
                </div>
                <button onclick="sendCreateThreadRequest()" style="background: #16A34A; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Send Request</button>
              </div>
              <div>
                <h3>Response</h3>
                <div style="background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; height: 400px; overflow-y: auto;" id="thread-response-area">
                  点击 "Send Request" 查看响应结果
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      modal.className = 'modal-overlay';
      document.body.appendChild(modal);
      
      window.sendCreateThreadRequest = async function() {
        const token = document.getElementById('thread-token').value;
        const title = document.getElementById('thread-title').value;
        const description = document.getElementById('thread-description').value;
        const type = document.getElementById('thread-type').value;
        const responseArea = document.getElementById('thread-response-area');
        
        if (!token) {
          responseArea.innerHTML = '<div style="color: red;">请填写 Bearer Token</div>';
          return;
        }
        
        responseArea.innerHTML = '<div>发送请求中...</div>';
        
        try {
          const response = await fetch('https://api.weiyuai.cn/threads/v1/create', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': 'Bearer ' + token
            },
            body: JSON.stringify({
              title: title,
              description: description,
              type: type
            })
          });
          
          const data = await response.json();
          responseArea.innerHTML = '<pre style="margin: 0; white-space: pre-wrap;">' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
          responseArea.innerHTML = '<div style="color: red;">请求失败: ' + error.message + '</div>';
        }
      };
    }}
    style={{
      background: '#16A34A',
      color: 'white',
      border: 'none',
      padding: '8px 16px',
      borderRadius: '6px',
      cursor: 'pointer',
      fontSize: '14px',
      fontWeight: '500'
    }}
  >
    Try it →
  </button>
</div>

## 接口说明

在开始与客服交流之前，需要先创建一个线程。每个线程都有唯一的标识符，用于后续的消息交互。

## 请求头

```
Authorization: Bearer <access_token>
```

## 请求体

```json
{
  "type": "string",
  "title": "string",
  "description": "string"
}
```

### 参数说明

- `type` (必需): 会话类型
  - `PERSONAL`: 个人会话
  - `GROUP`: 群组会话
  - `SUPPORT`: 客服会话
- `title` (可选): 会话标题
- `description` (可选): 会话描述

## 响应示例

### 成功响应 (200)

```json
{
  "id": "thread_123459",
  "type": "PERSONAL",
  "status": "ACTIVE",
  "title": "新建个人会话",
  "description": "用户创建的个人会话",
  "createdAt": "2023-01-04T12:00:00Z"
}
```

### 错误响应 (400)

```json
{
  "error": 400,
  "message": "Invalid thread type"
}
```

## 创建规则

- 会话类型必须是有效的枚举值
- 创建者自动成为会话成员
- 新会话默认状态为 ACTIVE
- 系统会自动生成唯一的会话 ID

## 会话类型说明

### PERSONAL（个人会话）
- 一对一的私人对话
- 只有两个参与者
- 用于私密沟通

### GROUP（群组会话）
- 多人参与的群组对话
- 支持成员管理
- 适用于团队协作

### SUPPORT（客服会话）
- 用户与客服的对话
- 具有工单性质
- 支持会话状态管理

## 使用场景

- 发起新的聊天对话
- 创建项目讨论组
- 开启客服咨询
- 建立临时沟通渠道

## 注意事项

- 不同类型会话可能有不同的权限要求
- 群组会话可能需要邀请其他成员
- 客服会话可能会自动分配客服人员

<RequestExample>

```bash cURL
curl -X POST "https://api.weiyuai.cn/api/v1/threads" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "PERSONAL",
    "title": "新建个人会话",
    "description": "用户创建的个人会话"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.weiyuai.cn/api/v1/threads', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer your_access_token_here',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    type: 'PERSONAL',
    title: '新建个人会话',
    description: '用户创建的个人会话'
  })
});

const newThread = await response.json();
```

```python Python
import requests

url = "https://api.weiyuai.cn/api/v1/threads"
headers = {
    "Authorization": "Bearer your_access_token_here",
    "Content-Type": "application/json"
}
data = {
    "type": "PERSONAL",
    "title": "新建个人会话",
    "description": "用户创建的个人会话"
}

response = requests.post(url, headers=headers, json=data)
new_thread = response.json()
```

</RequestExample>